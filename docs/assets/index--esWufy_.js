(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();var F=(i=>(i["catalogItems:changed"]="catalogItems:changed",i["linkForm:open"]="linkForm:open",i["catalogItem:picked"]="catalogItem:picked",i["modal:close"]="modal:close",i["popularItems: picked"]="popularItems: picked",i["catalog:scrolledBack"]="catalog:scrolledBack",i["catalog:scrolledForward"]="catalog:scrolledForward",i["catalog:scrolled"]="catalog:scrolled",i))(F||{});function Oe(i){const e=String(i);return e.length==1?`0${e}`:e}function We(i){return i.length>1&&i.startsWith("0")?i.slice(1):i}function Ze(i){const e=i.target;e&&(e.value=e.value.replace(/\D/g,""))}function Je(i){let e="";switch(i.toString().length){case 4:case 5:case 6:e=`${Math.round(i/1e3)}Kb`;break;case 7:case 8:case 9:e=`${Math.round(i/(1e3*1e3))}Mb`;break;default:e=`${i}b`}return e}function Pe(i){return typeof i=="string"&&i.length>1}function xe(i,e=document){if(Pe(i))return Array.from(e.querySelectorAll(i));if(i instanceof NodeList)return Array.from(i);if(Array.isArray(i))return i;throw new Error("Unknown selector element")}function d(i,e){if(Pe(i)){const t=xe(i,e);if(t.length>1&&console.warn(`selector ${i} return more then one element`),t.length===0)throw new Error(`selector ${i} return nothing`);return t.pop()}if(i instanceof HTMLElement)return i;throw new Error("Unknown selector element")}function U(i){return d(i).content.firstElementChild.cloneNode(!0)}class Xe{_events;constructor(){this._events=new Map}on(e,t){this._events.has(e)||this._events.set(e,new Set),this._events.get(e)?.add(t)}off(e,t){this._events.has(e)&&(this._events.get(e).delete(t),this._events.get(e)?.size===0&&this._events.delete(e))}emit(e,t){this._events.forEach((r,a)=>{a==="*"&&r.forEach(s=>s({eventName:e,data:t})),(a instanceof RegExp&&a.test(e)||a===e)&&r.forEach(s=>s(t))})}onAll(e){this.on("*",e)}offAll(){this._events=new Map}trigger(e,t){return(r={})=>{this.emit(e,{...r||{},...t||{}})}}}const E={placeholder:new URL("/cultco-website/assets/ph-CPc3LQAn.jpg",import.meta.url).href},Re=[{id:"1",title:"Строительные решения",src:E.placeholder,href:"#",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod. Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod.",categoryOffers:[{id:"1",title:"Корзины для кондиционеров",src:E.placeholder,description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod. Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod.",href:"",items:[{id:"1",title:"Корзина Alice Judge",src:E.placeholder,alt:"",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit.",hit:!0},{id:"2",title:"Корзина Adriana",src:E.placeholder,alt:"",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod. ",hit:!0},{id:"3",title:"Корзина Alice Judge",src:E.placeholder,alt:"",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit.",hit:!1}]},{id:"02",title:"Кровельные люки",src:E.placeholder,description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod. Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod.",href:"",items:[]},{id:"03",title:"Решетки шумоподавления",src:E.placeholder,description:"#",href:"",items:[]},{id:"04",title:"Подставки для кондиционеров",src:E.placeholder,description:"#",href:"",items:[]},{id:"05",title:"Поожарные шкафы",src:E.placeholder,description:"#",href:"",items:[]},{id:"06",title:"Вентиляционные люки",src:E.placeholder,description:"#",href:"",items:[]},{id:"07",title:"Вентиляционные решетки",src:E.placeholder,description:"#",href:"",items:[]}]},{id:"2",title:"Сервисное оборудование",src:E.placeholder,href:"#",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod. Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod.",categoryOffers:[{id:"1",title:"Станки",src:E.placeholder,description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod. Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod.",href:"",items:[{id:"1",title:"Станок Khristen hancher",src:E.placeholder,alt:"",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod. Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod.",hit:!0}]},{id:"02",title:"Инструменты",src:E.placeholder,description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod. Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod.",href:"",items:[{id:"1",title:'Набор инструментов "Гамора"',src:E.placeholder,alt:"",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod. Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod.",hit:!0}]}]},{id:"3",title:"Мангальные зоны",src:E.placeholder,href:"#",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod. Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod.",categoryOffers:[]},{id:"4",title:"Банные чаны",src:E.placeholder,href:"#",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod. Lorem ipsum dolor, sit amet consectetur adipisicing elit. Amet mollitia accusamus labore, ducimus vitae perspiciatis quod.",categoryOffers:[]}];class Qe{constructor(e){this.events=e}catalogItems=[];getCatalogItems(){return this.catalogItems}getCatalogCategoryById(e){return this.catalogItems.find(t=>t.id===e)||null}setCatalogItems(){this.catalogItems=Re,this.events.emit(F["catalogItems:changed"])}}class M{constructor(e){this.container=e}setText(e,t){e&&(e.textContent=String(t))}setImage(e,t,r){e&&(e.src=t,r&&(e.alt=r))}render(e){return Object.assign(this,e??{}),this.container}}class et extends M{constructor(e,t){super(e),this.events=t,this.cardLink=d(".catalog-item__link",this.container),this.cardImage=d(".catalog-item__image",this.container),this.cardTitle=d(".catalog-item__heading",this.container),this.cardId=d(".catalog-item__index",this.container),this.cardLink.addEventListener("click",r=>{r.preventDefault(),t.emit(F["catalogItem:picked"],{id:We(this.cardId.textContent)})})}cardLink;cardImage;cardId;cardTitle;set id(e){this.setText(this.cardId,Oe(+e))}set title(e){this.setText(this.cardTitle,e)}set src(e){this.setImage(this.cardImage,e)}set href(e){this.cardLink.setAttribute("href",e)}}class tt extends M{constructor(e,t){super(e),this.events=t,this.itemsContainer=d(".catalog-list",this.container)}itemsContainer;getContainer(){return this.container}getListContainer(){return this.itemsContainer}set items(e){this.itemsContainer.replaceChildren(...e)}}/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Be=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Q=Be.join(","),Me=typeof Element>"u",x=Me?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ee=!Me&&Element.prototype.getRootNode?function(i){var e;return i==null||(e=i.getRootNode)===null||e===void 0?void 0:e.call(i)}:function(i){return i?.ownerDocument},G=function(e,t){var r;t===void 0&&(t=!0);var a=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=a===""||a==="true",n=s||t&&e&&G(e.parentNode);return n},it=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},qe=function(e,t,r){if(G(e))return[];var a=Array.prototype.slice.apply(e.querySelectorAll(Q));return t&&x.call(e,Q)&&a.unshift(e),a=a.filter(r),a},te=function(e,t,r){for(var a=[],s=Array.from(e);s.length;){var n=s.shift();if(!G(n,!1))if(n.tagName==="SLOT"){var u=n.assignedElements(),f=u.length?u:n.children,m=te(f,!0,r);r.flatten?a.push.apply(a,m):a.push({scopeParent:n,candidates:m})}else{var y=x.call(n,Q);y&&r.filter(n)&&(t||!e.includes(n))&&a.push(n);var T=n.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(n),I=!G(T,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(n));if(T&&I){var A=te(T===!0?n.children:T.children,!0,r);r.flatten?a.push.apply(a,A):a.push({scopeParent:n,candidates:A})}else s.unshift.apply(s,n.children)}}return a},Ve=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},D=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||it(e))&&!Ve(e)?0:e.tabIndex},rt=function(e,t){var r=D(e);return r<0&&t&&!Ve(e)?0:r},at=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Ke=function(e){return e.tagName==="INPUT"},nt=function(e){return Ke(e)&&e.type==="hidden"},ot=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},st=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},ct=function(e){if(!e.name)return!0;var t=e.form||ee(e),r=function(u){return t.querySelectorAll('input[type="radio"][name="'+u+'"]')},a;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")a=r(window.CSS.escape(e.name));else try{a=r(e.name)}catch(n){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",n.message),!1}var s=st(a,e.form);return!s||s===e},lt=function(e){return Ke(e)&&e.type==="radio"},ut=function(e){return lt(e)&&!ct(e)},dt=function(e){var t,r=e&&ee(e),a=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var n,u,f;for(s=!!((n=a)!==null&&n!==void 0&&(u=n.ownerDocument)!==null&&u!==void 0&&u.contains(a)||e!=null&&(f=e.ownerDocument)!==null&&f!==void 0&&f.contains(e));!s&&a;){var m,y,T;r=ee(a),a=(m=r)===null||m===void 0?void 0:m.host,s=!!((y=a)!==null&&y!==void 0&&(T=y.ownerDocument)!==null&&T!==void 0&&T.contains(a))}}return s},Ee=function(e){var t=e.getBoundingClientRect(),r=t.width,a=t.height;return r===0&&a===0},ft=function(e,t){var r=t.displayCheck,a=t.getShadowRoot;if(r==="full-native"&&"checkVisibility"in e){var s=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!s}if(getComputedStyle(e).visibility==="hidden")return!0;var n=x.call(e,"details>summary:first-of-type"),u=n?e.parentElement:e;if(x.call(u,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof a=="function"){for(var f=e;e;){var m=e.parentElement,y=ee(e);if(m&&!m.shadowRoot&&a(m)===!0)return Ee(e);e.assignedSlot?e=e.assignedSlot:!m&&y!==e.ownerDocument?e=y.host:e=m}e=f}if(dt(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Ee(e);return!1},mt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var a=t.children.item(r);if(a.tagName==="LEGEND")return x.call(t,"fieldset[disabled] *")?!0:!a.contains(e)}return!0}t=t.parentElement}return!1},ie=function(e,t){return!(t.disabled||G(t)||nt(t)||ft(t,e)||ot(t)||mt(t))},ue=function(e,t){return!(ut(t)||D(t)<0||!ie(e,t))},vt=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},je=function(e){var t=[],r=[];return e.forEach(function(a,s){var n=!!a.scopeParent,u=n?a.scopeParent:a,f=rt(u,n),m=n?je(a.candidates):u;f===0?n?t.push.apply(t,m):t.push(u):r.push({documentOrder:s,tabIndex:f,item:a,isScope:n,content:m})}),r.sort(at).reduce(function(a,s){return s.isScope?a.push.apply(a,s.content):a.push(s.content),a},[]).concat(t)},pt=function(e,t){t=t||{};var r;return t.getShadowRoot?r=te([e],t.includeContainer,{filter:ue.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:vt}):r=qe(e,t.includeContainer,ue.bind(null,t)),je(r)},ht=function(e,t){t=t||{};var r;return t.getShadowRoot?r=te([e],t.includeContainer,{filter:ie.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=qe(e,t.includeContainer,ie.bind(null,t)),r},R=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return x.call(e,Q)===!1?!1:ue(t,e)},bt=Be.concat("iframe").join(","),le=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return x.call(e,bt)===!1?!1:ie(t,e)};/*!
* focus-trap 7.6.6
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function de(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=Array(e);t<e;t++)r[t]=i[t];return r}function gt(i){if(Array.isArray(i))return de(i)}function yt(i,e,t){return(e=St(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function wt(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Tt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Se(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),t.push.apply(t,r)}return t}function _e(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Se(Object(t),!0).forEach(function(r){yt(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function Lt(i){return gt(i)||wt(i)||_t(i)||Tt()}function Et(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function St(i){var e=Et(i,"string");return typeof e=="symbol"?e:e+""}function _t(i,e){if(i){if(typeof i=="string")return de(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?de(i,e):void 0}}var Fe={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r._setPausedState(!0)}var a=e.indexOf(t);a===-1||e.splice(a,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},Ft=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},kt=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},$=function(e){return e?.key==="Tab"||e?.keyCode===9},At=function(e){return $(e)&&!e.shiftKey},It=function(e){return $(e)&&e.shiftKey},ke=function(e){return setTimeout(e,0)},j=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return typeof e=="function"?e.apply(void 0,r):e},Z=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Nt=[],Ct=function(e,t){var r=t?.document||document,a=t?.trapStack||Nt,s=_e({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:At,isKeyBackward:It},t),n={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},u,f=function(o,c,l){return o&&o[c]!==void 0?o[c]:s[l||c]},m=function(o,c){var l=typeof c?.composedPath=="function"?c.composedPath():void 0;return n.containerGroups.findIndex(function(p){var h=p.container,g=p.tabbableNodes;return h.contains(o)||l?.includes(h)||g.find(function(v){return v===o})})},y=function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=c.hasFallback,p=l===void 0?!1:l,h=c.params,g=h===void 0?[]:h,v=s[o];if(typeof v=="function"&&(v=v.apply(void 0,Lt(g))),v===!0&&(v=void 0),!v){if(v===void 0||v===!1)return v;throw new Error("`".concat(o,"` was specified but was not a node, or did not return a node"))}var w=v;if(typeof v=="string"){try{w=r.querySelector(v)}catch(L){throw new Error("`".concat(o,'` appears to be an invalid selector; error="').concat(L.message,'"'))}if(!w&&!p)throw new Error("`".concat(o,"` as selector refers to no known node"))}return w},T=function(){var o=y("initialFocus",{hasFallback:!0});if(o===!1)return!1;if(o===void 0||o&&!le(o,s.tabbableOptions))if(m(r.activeElement)>=0)o=r.activeElement;else{var c=n.tabbableGroups[0],l=c&&c.firstTabbableNode;o=l||y("fallbackFocus")}else o===null&&(o=y("fallbackFocus"));if(!o)throw new Error("Your focus-trap needs to have at least one focusable element");return o},I=function(){if(n.containerGroups=n.containers.map(function(o){var c=pt(o,s.tabbableOptions),l=ht(o,s.tabbableOptions),p=c.length>0?c[0]:void 0,h=c.length>0?c[c.length-1]:void 0,g=l.find(function(L){return R(L)}),v=l.slice().reverse().find(function(L){return R(L)}),w=!!c.find(function(L){return D(L)>0});return{container:o,tabbableNodes:c,focusableNodes:l,posTabIndexesFound:w,firstTabbableNode:p,lastTabbableNode:h,firstDomTabbableNode:g,lastDomTabbableNode:v,nextTabbableNode:function(C){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,N=c.indexOf(C);return N<0?V?l.slice(l.indexOf(C)+1).find(function(K){return R(K)}):l.slice(0,l.indexOf(C)).reverse().find(function(K){return R(K)}):c[N+(V?1:-1)]}}}),n.tabbableGroups=n.containerGroups.filter(function(o){return o.tabbableNodes.length>0}),n.tabbableGroups.length<=0&&!y("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(n.containerGroups.find(function(o){return o.posTabIndexesFound})&&n.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},A=function(o){var c=o.activeElement;if(c)return c.shadowRoot&&c.shadowRoot.activeElement!==null?A(c.shadowRoot):c},k=function(o){if(o!==!1&&o!==A(document)){if(!o||!o.focus){k(T());return}o.focus({preventScroll:!!s.preventScroll}),n.mostRecentlyFocusedNode=o,Ft(o)&&o.select()}},ve=function(o){var c=y("setReturnFocus",{params:[o]});return c||(c===!1?!1:o)},pe=function(o){var c=o.target,l=o.event,p=o.isBackward,h=p===void 0?!1:p;c=c||Z(l),I();var g=null;if(n.tabbableGroups.length>0){var v=m(c,l),w=v>=0?n.containerGroups[v]:void 0;if(v<0)h?g=n.tabbableGroups[n.tabbableGroups.length-1].lastTabbableNode:g=n.tabbableGroups[0].firstTabbableNode;else if(h){var L=n.tabbableGroups.findIndex(function(se){var ce=se.firstTabbableNode;return c===ce});if(L<0&&(w.container===c||le(c,s.tabbableOptions)&&!R(c,s.tabbableOptions)&&!w.nextTabbableNode(c,!1))&&(L=v),L>=0){var C=L===0?n.tabbableGroups.length-1:L-1,V=n.tabbableGroups[C];g=D(c)>=0?V.lastTabbableNode:V.lastDomTabbableNode}else $(l)||(g=w.nextTabbableNode(c,!1))}else{var N=n.tabbableGroups.findIndex(function(se){var ce=se.lastTabbableNode;return c===ce});if(N<0&&(w.container===c||le(c,s.tabbableOptions)&&!R(c,s.tabbableOptions)&&!w.nextTabbableNode(c))&&(N=v),N>=0){var K=N===n.tabbableGroups.length-1?0:N+1,Le=n.tabbableGroups[K];g=D(c)>=0?Le.firstTabbableNode:Le.firstDomTabbableNode}else $(l)||(g=w.nextTabbableNode(c))}}else g=y("fallbackFocus");return g},W=function(o){var c=Z(o);if(!(m(c,o)>=0)){if(j(s.clickOutsideDeactivates,o)){u.deactivate({returnFocus:s.returnFocusOnDeactivate});return}j(s.allowOutsideClick,o)||o.preventDefault()}},he=function(o){var c=Z(o),l=m(c,o)>=0;if(l||c instanceof Document)l&&(n.mostRecentlyFocusedNode=c);else{o.stopImmediatePropagation();var p,h=!0;if(n.mostRecentlyFocusedNode)if(D(n.mostRecentlyFocusedNode)>0){var g=m(n.mostRecentlyFocusedNode),v=n.containerGroups[g].tabbableNodes;if(v.length>0){var w=v.findIndex(function(L){return L===n.mostRecentlyFocusedNode});w>=0&&(s.isKeyForward(n.recentNavEvent)?w+1<v.length&&(p=v[w+1],h=!1):w-1>=0&&(p=v[w-1],h=!1))}}else n.containerGroups.some(function(L){return L.tabbableNodes.some(function(C){return D(C)>0})})||(h=!1);else h=!1;h&&(p=pe({target:n.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(n.recentNavEvent)})),k(p||n.mostRecentlyFocusedNode||T())}n.recentNavEvent=void 0},Ye=function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n.recentNavEvent=o;var l=pe({event:o,isBackward:c});l&&($(o)&&o.preventDefault(),k(l))},be=function(o){(s.isKeyForward(o)||s.isKeyBackward(o))&&Ye(o,s.isKeyBackward(o))},ge=function(o){kt(o)&&j(s.escapeDeactivates,o)!==!1&&(o.preventDefault(),u.deactivate())},ye=function(o){var c=Z(o);m(c,o)>=0||j(s.clickOutsideDeactivates,o)||j(s.allowOutsideClick,o)||(o.preventDefault(),o.stopImmediatePropagation())},we=function(){if(n.active)return Fe.activateTrap(a,u),n.delayInitialFocusTimer=s.delayInitialFocus?ke(function(){k(T())}):k(T()),r.addEventListener("focusin",he,!0),r.addEventListener("mousedown",W,{capture:!0,passive:!1}),r.addEventListener("touchstart",W,{capture:!0,passive:!1}),r.addEventListener("click",ye,{capture:!0,passive:!1}),r.addEventListener("keydown",be,{capture:!0,passive:!1}),r.addEventListener("keydown",ge),u},Te=function(){if(n.active)return r.removeEventListener("focusin",he,!0),r.removeEventListener("mousedown",W,!0),r.removeEventListener("touchstart",W,!0),r.removeEventListener("click",ye,!0),r.removeEventListener("keydown",be,!0),r.removeEventListener("keydown",ge),u},Ue=function(o){var c=o.some(function(l){var p=Array.from(l.removedNodes);return p.some(function(h){return h===n.mostRecentlyFocusedNode})});c&&k(T())},oe=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(Ue):void 0,q=function(){oe&&(oe.disconnect(),n.active&&!n.paused&&n.containers.map(function(o){oe.observe(o,{subtree:!0,childList:!0})}))};return u={get active(){return n.active},get paused(){return n.paused},activate:function(o){if(n.active)return this;var c=f(o,"onActivate"),l=f(o,"onPostActivate"),p=f(o,"checkCanFocusTrap");p||I(),n.active=!0,n.paused=!1,n.nodeFocusedBeforeActivation=A(r),c?.();var h=function(){p&&I(),we(),q(),l?.()};return p?(p(n.containers.concat()).then(h,h),this):(h(),this)},deactivate:function(o){if(!n.active)return this;var c=_e({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},o);clearTimeout(n.delayInitialFocusTimer),n.delayInitialFocusTimer=void 0,Te(),n.active=!1,n.paused=!1,q(),Fe.deactivateTrap(a,u);var l=f(c,"onDeactivate"),p=f(c,"onPostDeactivate"),h=f(c,"checkCanReturnFocus"),g=f(c,"returnFocus","returnFocusOnDeactivate");l?.();var v=function(){ke(function(){g&&k(ve(n.nodeFocusedBeforeActivation)),p?.()})};return g&&h?(h(ve(n.nodeFocusedBeforeActivation)).then(v,v),this):(v(),this)},pause:function(o){return n.active?(n.manuallyPaused=!0,this._setPausedState(!0,o)):this},unpause:function(o){return n.active?(n.manuallyPaused=!1,a[a.length-1]!==this?this:this._setPausedState(!1,o)):this},updateContainerElements:function(o){var c=[].concat(o).filter(Boolean);return n.containers=c.map(function(l){return typeof l=="string"?r.querySelector(l):l}),n.active&&I(),q(),this}},Object.defineProperties(u,{_isManuallyPaused:{value:function(){return n.manuallyPaused}},_setPausedState:{value:function(o,c){if(n.paused===o)return this;if(n.paused=o,o){var l=f(c,"onPause"),p=f(c,"onPostPause");l?.(),Te(),q(),p?.()}else{var h=f(c,"onUnpause"),g=f(c,"onPostUnpause");h?.(),I(),we(),q(),g?.()}return this}}}),u.updateContainerElements(e),u};class Dt extends M{constructor(e,t){super(e),this.events=t,this.modal=d(".modal__container",this.container),this.modalTitle=d(".modal__heading",this.container),this.closeButton=d(".modal__close",this.container),this.modalContainer=d(".modal__content",this.container),this.closeButton.addEventListener("click",()=>{this.events.emit(F["modal:close"])}),this.focusTrap=Ct(this.container,{preventScroll:!0,escapeDeactivates:!1,clickOutsideDeactivates:!0,returnFocusOnDeactivate:!0,initialFocus:!1}),this.container.addEventListener("click",r=>{r.target===r.currentTarget&&this.events.emit(F["modal:close"])})}closeButton;modalTitle;modal;modalContainer;component="";focusTrap;getModal(){return this.modal}set contentType(e){this.component=e}_handleEscape=e=>{e.key==="Escape"&&(this.isOpen=!1,this.events.emit(F["modal:close"]))};set isOpen(e){e===!0?(this.container.classList.add("modal_active"),this.focusTrap.activate(),document.addEventListener("keydown",this._handleEscape)):(this.container.classList.remove("modal_active"),this.focusTrap.deactivate(),document.removeEventListener("keydown",this._handleEscape))}set textTitle(e){this.setText(this.modalTitle,e)}set content(e){this.modalContainer.replaceChildren(e)}modalRender(e,t){switch(e){case"link-form":this.modal.classList.remove("modal__container_large"),this.modal.classList.add("modal__container_small"),this.modal.classList.add("block-style-1");break;case"offers-form":this.modal.classList.remove("modal__container_small"),this.modal.classList.add("modal__container_large"),this.modal.classList.add("block-style-1");break}return Object.assign(this,t??{}),this.container}}function Ot(i,e){const t=document.querySelector(".top-products__list");for(let r=0;r<i.length;r++){const a=document.createElement("li");a.classList.add("top-products__item");const s=document.createElement("a");s.classList.add("top-products-item__link"),s.setAttribute("href","#");const n=document.createElement("img");n.setAttribute("src",i[r].src),n.classList.add("top-products-item__image");const u=document.createElement("span");u.classList.add("top-products-item__index"),u.innerHTML=i[r].index;const f=document.createElement("h3");f.classList.add("top-products-item__heading"),f.innerHTML=i[r].title;const m=document.createElement("p");m.classList.add("top-products-item__description"),m.innerHTML=i[r].description;const y=document.createElement("button");y.classList.add("top-products-item_button"),y.classList.add("button-style"),y.setAttribute("name","link-form"),y.innerHTML="Узнать подробнее",s.addEventListener("click",T=>{T.preventDefault(),e.emit(F["popularItems: picked"],{id:r})}),s.append(n,u,f,m,y),a.append(s),t?.append(a)}t?.addEventListener("mouseenter",r=>{r.preventDefault()},{passive:!1})}class Pt extends M{constructor(e,t){super(e),this.events=t,this.form=d(".form-link",this.container),this.name=d(".input_name",this.container),this.phone=d(".input-phone",this.container),this.email=d(".input_email",this.container),this.file=d("#files",this.container),this.fileTitles=d(".form-input_file",this.container),this.textarea=d(".form-area",this.container),this._submitButton=d('button[type="submit"]',this.container),this.form.addEventListener("submit",r=>{r.preventDefault(),this.events.emit(`${this.container.getAttribute("name")}:submit`),this.resetForm()}),this.name.addEventListener("input",()=>{this.validateName()}),this.name.addEventListener("blur",()=>{this.validateName()}),this.phone.addEventListener("input",r=>{Ze(r),this.validatePhone()}),this.phone.addEventListener("blur",()=>{this.validatePhone()}),this.email.addEventListener("input",()=>{this.validateEmail()}),this.email.addEventListener("blur",()=>{this.validateEmail()}),this.file.addEventListener("change",r=>{const a=r.target,s=Array.from(a.files||[]);if(s.length===0)return;if(this.selectedFiles.length+s.length>6){a.value="",console.log("Максимальное количество файлов - 6");return}for(const u of s)this.selectedFiles.some(m=>m.name===u.name&&m.size===u.size)||this.selectedFiles.push(u);this.updateFileDisplay(),a.value=""})}form;name;phone;email;fileTitles;file;textarea;_submitButton;isNameValid=!1;isPhoneValid=!1;isEmailValid=!1;selectedFiles=[];updateFileDisplay(){if(this.fileTitles.innerHTML="",this.selectedFiles.length===0){this.fileTitles.classList.add("form-input_file-empty"),this.fileTitles.textContent="Выберите файл...";return}this.fileTitles.classList.remove("form-input_file-empty");const e=document.createElement("ul");e.classList.add("form-input_file__list"),this.selectedFiles.forEach((t,r)=>{const a=document.createElement("li");a.classList.add("form__file-item");const s=document.createElement("button");s.classList.add("form__file-remove"),s.type="button",s.addEventListener("click",()=>this.removeFile(r));const n=document.createElement("span");n.textContent=`${t.name} (${Je(t.size)})`,a.append(s),a.append(n),e.append(a)}),this.fileTitles.append(e)}removeFile(e){this.selectedFiles.splice(e,1),this.updateFileDisplay()}validateName(){const e=this.name.value.trim(),t=/^[A-Za-zА-Яа-яЁё\s]{2,}$/;return this.isNameValid=t.test(e),!this.isNameValid&&e.length>0?this.name.classList.add("error"):this.name.classList.remove("error"),this.isNameValid}validatePhone(){const e=this.phone.value.replace(/\D/g,"");return this.isPhoneValid=e.length>=10&&e.length<=15,!this.isPhoneValid&&e.length>0?this.phone.classList.add("error"):this.phone.classList.remove("error"),this.isPhoneValid}validateEmail(){const e=this.email.value.trim(),t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return this.isEmailValid=t.test(e),!this.isEmailValid&&e.length>0?this.email.classList.add("error"):this.email.classList.remove("error"),this.isEmailValid}getFormData(){return{name:this.name.value.trim(),phone:this.phone.value,email:this.email.value.trim(),files:this.selectedFiles}}resetForm(){this.form.reset(),this.selectedFiles=[],this.updateFileDisplay(),this.isNameValid=!1,this.isPhoneValid=!1,this.isEmailValid=!1,this.name.classList.remove("error"),this.phone.classList.remove("error"),this.email.classList.remove("error")}getSelectedFiles(){return[...this.selectedFiles]}addFiles(e){for(const t of e)this.selectedFiles.length<6&&(this.selectedFiles.some(a=>a.name===t.name&&a.size===t.size)||this.selectedFiles.push(t));this.updateFileDisplay()}}function $e(i,e,t){const r=e.querySelector(".viewer__index");r.textContent=t[i].index;const a=e.querySelector(".viewer__image");a?.setAttribute("src",t[i].src),a?.setAttribute("alt",t[i].alt);const s=e.querySelector(".viewer__title");s.textContent=t[i].title;const n=e.querySelector(".viewer__description");n.textContent=t[i].description;const u=document.querySelectorAll(".top-products__item");u.forEach(f=>f.classList.remove("item_active")),u[i].classList.add("item_active")}class xt extends M{constructor(e,t){super(e),this.events=t,this.categoryTitle=d(".catalog-info__text-content",this.container),this.formContainer=d(".catalog-info__container",this.container)}categoryTitle;formContainer;set description(e){this.setText(this.categoryTitle,e)}set content(e){this.formContainer.replaceChildren(...e)}}class Rt extends M{constructor(e,t){super(e),this.events=t,this.cardLink=d(".catalog-info__link",this.container),this.cardImage=d(".catalog-info__image",this.container),this.cardTitle=d(".catalog-info__heading",this.container),this.cardLink.addEventListener("click",r=>{r.preventDefault()})}cardLink;cardImage;cardTitle;set title(e){this.setText(this.cardTitle,e)}set src(e){this.setImage(this.cardImage,e)}set href(e){this.cardLink.setAttribute("href",e)}}function Bt(){document.addEventListener("DOMContentLoaded",()=>{const i=document.querySelector(".top-products__list"),e=document.querySelector(".top-products__pagination");if(!i)return;const t=()=>{const s=i.scrollLeft,n=i.querySelectorAll(".top-products__item");if(n.length===0)return;const f=n[0].offsetWidth,y=window.getComputedStyle(i).getPropertyValue("gap"),T=parseInt(y)||0,I=f+T;let A=Math.round(s/I);A=Math.min(A,n.length-1),e&&(e.textContent="",n.forEach(()=>{if(e){const k=document.createElement("li");k.classList.add("top-products__pagination-item"),e?.append(k)}})),e?.children[A].classList.add("top-products__pagination-item_active")};let r;i.addEventListener("scroll",()=>{clearTimeout(r),r=window.setTimeout(t,100)}),t();let a;window.addEventListener("resize",()=>{clearTimeout(a),a=window.setTimeout(t,250)})})}function Mt(i){if(!i)return;const e=i.querySelectorAll("a[data-anchor]"),r=window.getComputedStyle(document.body).getPropertyValue("gap"),a=i.querySelector(".burger-menu-overlay"),s=parseInt(r)||0;e.forEach(n=>{n.addEventListener("click",u=>{u.preventDefault();const f=document.querySelector(`#${n.getAttribute("data-anchor")}`);if(!f)return;if(a?.classList.remove("burger-menu_active"),document.body.style.overflow="",f.id=="main-anchor"){window.scrollTo({top:0,behavior:"smooth"});return}const m=f.getBoundingClientRect().top+window.pageYOffset-s-50-s/2;window.scrollTo({top:m,behavior:"smooth"})})})}function qt(){function i(){const e=document.querySelector(".contacts__map");if(!e)return;const a=window.innerWidth<768?"https://yandex.ru/map-widget/v1/?um=constructor%3Ad5e1aac6de9e59580ab4270cb44847900d20034957d778d19a644ba0c6853057&source=constructor":"https://yandex.ru/map-widget/v1/?um=constructor%3A432a35867723fbd4ceb15817a3f56cb94d166839ab3096d3274ce690c0bf34f6&source=constructor";e.src!==a&&(e.src=a)}document.addEventListener("DOMContentLoaded",()=>{i();let e;window.addEventListener("resize",()=>{clearTimeout(e),e=window.setTimeout(i,250)})})}function Vt(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var fe=!1;if(typeof window<"u"){var Ae={get passive(){fe=!0}};window.addEventListener("testPassive",null,Ae),window.removeEventListener("testPassive",null,Ae)}var re=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),P=[],ae=!1,ze=-1,z=void 0,O=void 0,H=void 0,He=function(e){return P.some(function(t){return!!(t.options.allowTouchMove&&t.options.allowTouchMove(e))})},ne=function(e){var t=e||window.event;return He(t.target)||t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)},Kt=function(e){if(H===void 0){var t=!1,r=window.innerWidth-document.documentElement.clientWidth;if(t&&r>0){var a=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);H=document.body.style.paddingRight,document.body.style.paddingRight=a+r+"px"}}z===void 0&&(z=document.body.style.overflow,document.body.style.overflow="hidden")},jt=function(){H!==void 0&&(document.body.style.paddingRight=H,H=void 0),z!==void 0&&(document.body.style.overflow=z,z=void 0)},$t=function(){return window.requestAnimationFrame(function(){if(O===void 0){O={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var e=window,t=e.scrollY,r=e.scrollX,a=e.innerHeight;document.body.style.position="fixed",document.body.style.top=-t,document.body.style.left=-r,setTimeout(function(){return window.requestAnimationFrame(function(){var s=a-window.innerHeight;s&&t>=a&&(document.body.style.top=-(t+s))})},300)}})},zt=function(){if(O!==void 0){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=O.position,document.body.style.top=O.top,document.body.style.left=O.left,window.scrollTo(t,e),O=void 0}},Ht=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},Gt=function(e,t){var r=e.targetTouches[0].clientY-ze;return He(e.target)?!1:t&&t.scrollTop===0&&r>0||Ht(t)&&r<0?ne(e):(e.stopPropagation(),!0)},Ge=function(e,t){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!P.some(function(a){return a.targetElement===e})){var r={targetElement:e,options:{}};P=[].concat(Vt(P),[r]),re?$t():Kt(),re&&(e.ontouchstart=function(a){a.targetTouches.length===1&&(ze=a.targetTouches[0].clientY)},e.ontouchmove=function(a){a.targetTouches.length===1&&Gt(a,e)},ae||(document.addEventListener("touchmove",ne,fe?{passive:!1}:void 0),ae=!0))}},Yt=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}P=P.filter(function(t){return t.targetElement!==e}),re&&(e.ontouchstart=null,e.ontouchmove=null,ae&&P.length===0&&(document.removeEventListener("touchmove",ne,fe?{passive:!1}:void 0),ae=!1)),re?zt():jt()};const S=document.body,Ut=d("#catalog-item",S),Wt=d("#link-form",S),Zt=d("#catalog-info",S),Jt=d("#catalog-info__item",S),Xt=d("#product-viewer",S),_=new Xe,me=new Qe(_),Qt=new tt(d(".catalog",S),_),B=new Dt(d("#modal-container",S),_),ei=new Pt(U(Wt),_),ti=new xt(U(Zt),_);function ii(){if(X.length===0){Ie&&(Ie.style.display="none");return}Ot(X,_),Y&&$e(0,Y,X)}const Ie=d(".top-products",S),Y=U(Xt),J=d(".burger-menu-overlay",S),Ne=d(".header__burger-menu-btn",S),Ce=d(".header__navigation",S),De=d(".header__contacts",S),ri=d(".top-products__container",S),X=Re.reduce((i,e)=>(e.categoryOffers.forEach(t=>{const r=t.items.filter(a=>a.hit===!0);i.push(...r)}),i),[]).map((i,e)=>({...i,index:Oe(e+1)}));_.on(F["catalogItems:changed"],()=>{const i=me.getCatalogItems().map(e=>new et(U(Ut),_).render(e));Qt.render({items:i})});_.on(F["linkForm:open"],({title:i})=>{B.modalRender("link-form",{content:ei.render(),isOpen:!0,textTitle:i}),Ge(B.getModal())});_.on(F["catalogItem:picked"],({id:i})=>{const e=me.getCatalogCategoryById(i);if(e){const t=e.categoryOffers.map(r=>new Rt(U(Jt),_).render(r));B.modalRender("offers-form",{content:ti.render({...e,content:t}),isOpen:!0,textTitle:e.title}),Ge(B.getModal())}});_.on(F["modal:close"],()=>{B.render({content:null,isOpen:!1,textTitle:""}),Yt(B.getModal())});_.on(F["popularItems: picked"],({id:i})=>{Y&&$e(i,Y,X)});if(Ce&&De&&J&&Ne){const i=Ce.cloneNode(!0),e=De.cloneNode(!0);J.appendChild(i),J.appendChild(e),Ne?.addEventListener("click",()=>{J?.classList.toggle("burger-menu_active")})}Mt(S);me.setCatalogItems();ri.prepend(Y);ii();Bt();const ai=xe('button[name="link-form"]',S);ai.forEach(i=>i.addEventListener("click",e=>{e.preventDefault(),_.emit(F["linkForm:open"],{title:"Свяжитесь с нами"})}));qt();
